commit b093ed77fbab09bd474094898719ed6346d30d45
Author: Jeremy Huddleston <jeremyhu@apple.com>
Date:   Sun Jan 22 22:01:07 2012 -0800

    Build fix for int-pointer cast errors
    
    Signed-off-by: Jeremy Huddleston <jeremyhu@apple.com>

diff --git a/src/XawIm.c b/src/XawIm.c
index b01f0d0..82a94b1 100644
--- a/src/XawIm.c
+++ b/src/XawIm.c
@@ -141,14 +141,14 @@ SearchVendorShell(Widget w)
     return(NULL);
 }
 
-static XContext extContext = (XContext)NULL;
+static XContext extContext = (XContext)0;
 
 static XawVendorShellExtPart *
 SetExtPart(VendorShellWidget w, XawVendorShellExtWidget vew)
 {
     contextDataRec *contextData;
 
-    if (extContext == (XContext)NULL) extContext = XUniqueContext();
+    if (extContext == (XContext)0) extContext = XUniqueContext();
 
     contextData = XtNew(contextDataRec);
     contextData->parent = (Widget)w;
@@ -252,14 +252,14 @@ ConfigureCB(Widget w, XtPointer closure, XEvent *event)
     }
 }
 
-static XContext errContext = (XContext)NULL;
+static XContext errContext = (XContext)0;
 
 static Widget
 SetErrCnxt(Widget w, XIM xim)
 {
     contextErrDataRec *contextErrData;
 
-    if (errContext == (XContext)NULL) errContext = XUniqueContext();
+    if (errContext == (XContext)0) errContext = XUniqueContext();
 
     contextErrData = XtNew(contextErrDataRec);
     contextErrData->widget = w;
@@ -1321,12 +1321,12 @@ Destroy(Widget w, XawVendorShellExtPart *ve)
 	return;
     XtFree( (char*) ve->im.resources );
 
-    if (extContext != (XContext)NULL &&
+    if (extContext != (XContext)0 &&
 	!XFindContext (XtDisplay (w), (Window)w,
 		       extContext, (XPointer*)&contextData))
         XtFree( (char*) contextData );
 
-    if (errContext != (XContext)NULL &&
+    if (errContext != (XContext)0 &&
 	!XFindContext (XDisplayOfIM( ve->im.xim ), (Window) ve->im.xim,
 		       errContext, (XPointer*) &contextErrData))
         XtFree( (char*) contextErrData );

commit 702e4ff9f5fbfae4aecba09f8c735dc97bac1b59
Author: Jeremy Huddleston <jeremyhu@apple.com>
Date:   Sun Jan 22 11:58:09 2012 -0800

    Cleanup shadow declarations
    
    Box.c:265:10: warning: declaration shadows a local variable [-Wshadow]
                int i = bbw->composite.num_children;
                    ^
    Box.c:166:15: note: previous declaration is here
        Cardinal  i;
                  ^
    1 warning generated.
    
    Form.c:809:9: warning: declaration shadows a local variable [-Wshadow]
            Widget w = *childP;
                   ^
    Form.c:793:24: note: previous declaration is here
    XawFormDoLayout(Widget w,
                           ^
    1 warning generated.
    
    Viewport.c:627:24: warning: declaration shadows a local variable [-Wshadow]
                        if (!needshoriz) CheckHoriz();
                                         ^
    Viewport.c:605:14: note: expanded from macro 'CheckHoriz'
                        Widget bar = w->viewport.horiz_bar;                 \
                               ^
    Viewport.c:620:14: note: previous declaration is here
                        Widget bar = w->viewport.vert_bar;
                               ^
    1 warning generated.
    
    Signed-off-by: Jeremy Huddleston <jeremyhu@apple.com>

diff --git a/src/Box.c b/src/Box.c
index ccd52fd..43be5dc 100644
--- a/src/Box.c
+++ b/src/Box.c
@@ -262,9 +262,9 @@ DoLayout(BoxWidget bbw, Dimension width, Dimension height,
 	if (bbw->composite.num_children == num_mapped_children)
 	    XMapSubwindows( XtDisplay((Widget)bbw), XtWindow((Widget)bbw) );
 	else {
-	    int i = bbw->composite.num_children;
+	    int j = bbw->composite.num_children;
 	    Widget *childP = bbw->composite.children;
-	    for (; i > 0; childP++, i--)
+	    for (; j > 0; childP++, j--)
 		if (XtIsRealized(*childP) && XtIsManaged(*childP) &&
 		    (*childP)->core.mapped_when_managed)
 		    XtMapWidget(*childP);
diff --git a/src/Form.c b/src/Form.c
index 49fceb6..f078270 100644
--- a/src/Form.c
+++ b/src/Form.c
@@ -790,7 +790,7 @@ PreferredGeometry(Widget widget, XtWidgetGeometry *request, XtWidgetGeometry *re
  */
 
 void
-XawFormDoLayout(Widget w,
+XawFormDoLayout(Widget _fw,
 #if NeedWidePrototypes
 		int doit)
 #else
@@ -798,11 +798,11 @@ XawFormDoLayout(Widget w,
 #endif
 {
     Widget *childP;
-    FormWidget fw = (FormWidget)w;
+    FormWidget fw = (FormWidget)_fw;
     int num_children = fw->composite.num_children;
     WidgetList children = fw->composite.children;
 
-    if ( ((fw->form.no_refigure = !doit) == TRUE) || !XtIsRealized(w) )
+    if ( ((fw->form.no_refigure = !doit) == TRUE) || !XtIsRealized(_fw) )
 	return;
 
     for (childP = children; childP - children < num_children; childP++) {
diff --git a/src/Viewport.c b/src/Viewport.c
index abb8961..a37a9a1 100644
--- a/src/Viewport.c
+++ b/src/Viewport.c
@@ -602,12 +602,12 @@ ComputeLayout(Widget widget, Boolean query, Boolean destroy_scrollbars)
 	    if (w->viewport.allowhoriz &&				\
 		    (int)preferred.width > clip_width + 2 * sw) {	\
 		if (!needshoriz) {					\
-		    Widget bar = w->viewport.horiz_bar;			\
+		    Widget horiz_bar = w->viewport.horiz_bar;		\
 		    needshoriz = True;					\
-		    if (bar == (Widget)NULL)				\
-			bar = CreateScrollbar(w, True);			\
-		    clip_height -= bar->core.height +			\
-				   bar->core.border_width + pad;	\
+		    if (horiz_bar == (Widget)NULL)			\
+			horiz_bar = CreateScrollbar(w, True);		\
+		    clip_height -= horiz_bar->core.height +		\
+				   horiz_bar->core.border_width + pad;	\
 		    if (clip_height < 1) clip_height = 1;		\
 		}							\
 		intended.width = preferred.width;			\
@@ -617,12 +617,12 @@ ComputeLayout(Widget widget, Boolean query, Boolean destroy_scrollbars)
 	    if (w->viewport.allowvert &&
 		    (int)preferred.height > clip_height + 2 * sw) {
 		if (!needsvert) {
-		    Widget bar = w->viewport.vert_bar;
+		    Widget vert_bar = w->viewport.vert_bar;
 		    needsvert = True;
-		    if (bar == (Widget)NULL)
-			bar = CreateScrollbar(w, False);
-		    clip_width -= bar->core.width +
-				  bar->core.border_width + pad;
+		    if (vert_bar == (Widget)NULL)
+			vert_bar = CreateScrollbar(w, False);
+		    clip_width -= vert_bar->core.width +
+				  vert_bar->core.border_width + pad;
 		    if (clip_width < 1) clip_width = 1;
 		    if (!needshoriz) CheckHoriz();
 		}

commit d31153b30abd26c3f65e19d126ce4a3542cf14c0
Author: Jeremy Huddleston <jeremyhu@apple.com>
Date:   Sun Jan 22 11:55:29 2012 -0800

    Include <stdlib.h> for abs()
    
    Tip.c:336:9: error: implicit declaration of function 'abs' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
            ksy += abs(ext->max_ink_extent.y);
                   ^
    1 error generated.
    
    Signed-off-by: Jeremy Huddleston <jeremyhu@apple.com>

diff --git a/src/Tip.c b/src/Tip.c
index 6881670..5f54d14 100644
--- a/src/Tip.c
+++ b/src/Tip.c
@@ -43,6 +43,8 @@
 #include <X11/Xaw3d/TipP.h>
 #include <X11/Xaw3d/XawInit.h>
 
+#include <stdlib.h>
+
 #define	TIP_EVENT_MASK (ButtonPressMask	  |	\
 			ButtonReleaseMask |	\
 			PointerMotionMask |	\
commit d50aaed45a5770d9f84fe94279d4fd49ff834b85
Author: Matt Turner <mattst88@gmail.com>
Date:   Mon Jan 23 15:04:21 2012 -0500

    Include XAW3D_CPPFLAGS in xaw3d.pc Cflags
    
    Software depending on libXaw3d seems to require this.
    
    Fixes: https://bugs.freedesktop.org/show_bug.cgi?id=45144
    
    Reviewed-by: Gaetan Nadon <memsize@videotron.ca>
    Signed-off-by: Matt Turner <mattst88@gmail.com>

diff --git a/xaw3d.pc.in b/xaw3d.pc.in
index b243c52..f53fca5 100644
--- a/xaw3d.pc.in
+++ b/xaw3d.pc.in
@@ -8,5 +8,5 @@ Description: X 3D Athena Widgets Library
 Version: @PACKAGE_VERSION@
 Requires: xproto xmu xt
 Requires.private: x11 xext
-Cflags: -I${includedir}
+Cflags: -I${includedir} @XAW3D_CPPFLAGS@
 Libs: -L${libdir} -lXaw3d
